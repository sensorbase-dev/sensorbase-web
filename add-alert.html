<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="SensorBase">
  
  <title>SensorBase Â· Add a device</title>
  
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  
  <meta name="theme-color" content="#563d7c">
  
  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>
  <!-- Custom styles for this template -->
</head>
<body class="bg-light">
  <div class="container">
    <div class="py-5 text-center">
      <img class="d-block mx-auto mb-4" src="img/logo.svg" alt="" width="72" height="72">
      <h2>API test queries</h2>
      <p class="lead">Queries that aren't ready for the big screen yet.</p>
    </div>
    
    <div class="row">
      <h3>Add alert</h3>
    </div>
   
    <div class="row">
    
      <form>
        <div class="form-group">
          <label for="componentId">Email address (String):</label>
          <input class="form-control" type="text" id="emailAddress" value="">
        </div><div class="form-group">
          <label for="componentId">componentId (Long):</label>
          <input class="form-control" type="text" id="componentId" value="">
        </div>
        <div class="form-group">
          <label for="condition-selector">Condition: </label>
          <select class="form-control" id="condition-selector">
            <option>ABOVE</option>
            <option>BELOW</option>
          </select>
        </div>
        <div class="form-group">
         <label for="threshold">Threshold value (double):</label>
         <input class="form-control" type="text" id ="threshold" value=""><br>
        </div>
        <input type="button" class="btn btn-primary btnSeccion" value="Submit" onclick="addAlert();//postSensorBaseQuery();"><br>
      </form>
    </div>
    <!-- 
    <div class="row">
      <h3>Add Sensor to Device</h3>
    </div>
   
    <div class="row">
      <form>
        HardwareUid (64-bit, hexadecimal): 
        <input type="text" id="hardwareUidHex" value="DEADBEEFDEADBEEF"><br>
        deviceName (string):
        <input type="text" id ="deviceName" value="SensorBase front-end test device #1"><br>
        <input type="button" class="btn btn-primary btnSeccion"
        value="Submit query" onclick="addTestDevice();//postSensorBaseQuery();"><br>
      </form>
    </div>
    
    <div class="row">
      <h3>Add SensorReading</h3>
    </div>
   
    <div class="row">
      <form>
        HardwareUid (64-bit, hexadecimal): 
        <input type="text" id="hardwareUidHex" value="DEADBEEFDEADBEEF"><br>
        deviceName (string):
        <input type="text" id ="deviceName" value="SensorBase front-end test device #1"><br>
        <input type="button" class="btn btn-primary btnSeccion"
        value="Submit query" onclick="addTestDevice();//postSensorBaseQuery();"><br>
      </form>
    </div>
  -->

    <footer class="my-5 pt-5 text-muted text-center text-small">
      <p class="mb-1">&copy; 2017-2019 Company Name</p>
      <ul class="list-inline">
        <li class="list-inline-item"><a href="#">Privacy</a></li>
        <li class="list-inline-item"><a href="#">Terms</a></li>
        <li class="list-inline-item"><a href="#">Support</a></li>
      </ul>
    </footer>
  </div>
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="form-validation.js"></script>
  <script src="js/sensorbase-rest.js"></script>
  <script>
    function addAlert() {
      let emailAddress = document.getElementById('emailAddress').value;
      let componentId = document.getElementById("componentId").value;
      let alertCondition = document.getElementById("condition-selector").value;
      let threshold = document.getElementById("threshold").value;

      let alert = {
        emailAddress : emailAddress,
        alertCondition : alertCondition,
        threshold : threshold 
      }
      
      var alertJSON = JSON.stringify(alert);
      console.log(alert);

      postSensorBaseQuery(alertJSON, `/sensors/${componentId}/alerts`, printPostResponse);
    }

    var printPostResponse = function (postResponse) {
      console.log(postResponse);
    }
  </script>
</body>
</html>
  